import{e as i,u as te,h as ie,f as de,r as R,o as z,c as $,b as t,a as o,w as _,j as ne,F as se,k as ue,t as H,d as re,l as ce,g as me}from"./index-8ffd0240.js";import{a as I}from"./axios-99a7d01f.js";const ve=ue('<div class="card"><h3>⚠️解析须知</h3><p><h5>解析时请注意域名到期时间，域名到期后不会续费，需要稳定、高质量域名请前往<a href="https://app.houlangs.com" target="_blank">厚浪-主站</a></h5><h5>请完成认证后再解析<a href="/#/user_info">点此认证</a></h5> 在管理域名记录时，请遵守以下准则： <br> - 请勿托管盈利性网站，如卡片商店、支付网关等。 <br> - 禁止包含赌博、成人内容、欺诈等非法内容。 <br> - 使用备案域名时，请在网站底部显示备案号。 <br> - 严禁使用域名进行任何非法活动。 <br> 违规者将被删除解析并永久封禁账户，无法解封。 </p></div>',1),fe={class:"card"},pe=t("h4",{class:"m-0"},"记录列表",-1),_e={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},he={class:"p-input-icon-left"},ge=t("i",{class:"pi pi-search"},null,-1),be=["href"],ye={class:"p-buttonset"},Re={class:"field"},Ve=t("label",{for:"prefix"},"域名前缀",-1),xe={class:"field"},De=t("label",{for:"domain"},"选择域名",-1),Ce={class:"field"},we=t("label",{for:"type"},"记录类型",-1),Ie={class:"field"},ke=t("label",{for:"value"},"记录值",-1),Te={class:"field"},Ue=t("label",{for:"line"},"线路",-1),Le={class:"field"},Ee=t("label",{for:"comment"},"备注",-1),Me={class:"field"},Oe=t("label",{for:"prefix"},"域名前缀",-1),Se={class:"field"},Ne=t("label",{for:"domain"},"选择域名",-1),Pe={key:0,class:"card p-fluid"},Be=t("br",null,null,-1),je=["innerHTML"],Ae={class:"field"},Fe=t("label",{for:"type"},"记录类型",-1),ze={class:"field"},$e=t("label",{for:"value"},"记录值",-1),He={class:"field"},Ge=t("label",{for:"line"},"线路",-1),Ke={class:"field"},Xe=t("label",{for:"comment"},"备注",-1),qe=t("p",null," 域名记录删除后不可恢复，确认删除该域名记录？ ",-1),Ye={__name:"DomainRecord",setup(Je){const E=i(""),h=i([]),c=i(""),k=i([]),m=i(""),x=i(""),P=i([{name:"A"},{name:"CNAME"},{name:"TXT"}]),V=i(""),D=i(""),B=i([{id:1,name:"高防CDN"},{id:0,name:"默认"}]),p=i(""),C=i(""),j=i(""),A=i(""),T=i(!1),U=i(!1),L=i(!1),u=te();ie();const M=i({global:{value:null,matchMode:me.CONTAINS}});let F=i(),O=i([]);const v=i(!1);de(()=>{G(),w()});const G=()=>{I.get("/user/get_user").then(function(l){E.value=l.data.data.id}).catch(function(l){console.log(l)})},K=()=>{I.get("/domain/list",{params:{page:1,pageSize:10}}).then(function(l){l.data.code===200?(k.value=l.data.data.records,le()):u.add({severity:"error",summary:"ERROR",detail:l.data.msg,life:3e3})}).catch(function(l){console.log(l)})},w=()=>{I.get("/domain_record/list",{params:{page:1,pageSize:10}}).then(function(l){l.data.code===200?(h.value=l.data.data.records,K()):u.add({severity:"error",summary:"ERROR",detail:l.data.msg,life:3e3})}).catch(function(l){console.log(l)})},X=(l,e,d,f,n,r,g,b,s)=>{I.put("/domain_record/update",{userId:l,id:e,did:d,prefix:f,type:n,value:r,lineId:g,line:b,comment:s}).then(function(y){y.data.code===200?(T.value=!1,c.value=null,v.value=!1,u.add({severity:"success",summary:"SUCCESS",detail:y.data.msg,life:3e3})):(console.log(y.data),v.value=!1,u.add({severity:"error",summary:"ERROR",detail:y.data.msg,life:3e3})),w()}).catch(function(y){w(),console.log(y)})},q=(l,e,d,f,n,r,g,b)=>{I.post("/domain_record/add",{userId:l,did:e,prefix:d,type:f,value:n,lineId:r,line:g,comment:b}).then(function(s){s.data.code===200?(U.value=!1,c.value=null,u.add({severity:"success",summary:"SUCCESS",detail:s.data.msg,life:3e3})):(console.log(s.data),u.add({severity:"error",summary:"ERROR",detail:s.data.msg,life:3e3})),v.value=!1,w()}).catch(function(s){w(),console.log(s)})},J=l=>{I.delete("/domain_record/delete/"+l).then(function(e){e.data.code===200?(L.value=!1,c.value=null,u.add({severity:"success",summary:"SUCCESS",detail:e.data.msg,life:3e3})):(console.log(e.data),u.add({severity:"error",summary:"ERROR",detail:e.data.msg,life:3e3})),w()}).catch(function(e){w(),console.log(e)})},S=()=>{T.value=!1,U.value=!1,L.value=!1,c.value=null},Q=l=>{c.value=l,x.value=c.value.prefix,m.value=c.value.did,D.value=c.value.value,p.value=c.value.lineId,C.value=c.value.comment,T.value=!0},W=l=>{c.value=l,L.value=!0},Y=()=>{v.value=!0;const l=c.value.id,e=E.value,d=x.value;if(m.value==null)return v.value=!1,u.add({severity:"error",summary:"ERROR",detail:"域名不能为空",life:3e3});const f=m.value.id;if(V.value==null)return v.value=!1,u.add({severity:"error",summary:"ERROR",detail:"记录类型不能为空",life:3e3});const n=V.value.name,r=D.value;if(p.value==null)return v.value=!1,u.add({severity:"error",summary:"ERROR",detail:"线路不能为空",life:3e3});const g=p.value.id,b=p.value.name,s=C.value;X(e,l,f,d,n,r,g,b,s)},Z=()=>{v.value=!0;const l=E.value,e=x.value;if(m.value==null)return v.value=!1,u.add({severity:"error",summary:"ERROR",detail:"域名不能为空",life:3e3});const d=m.value.id;if(V.value==null)return v.value=!1,u.add({severity:"error",summary:"ERROR",detail:"记录类型不能为空",life:3e3});const f=V.value.name,n=D.value;if(p.value==null)return v.value=!1,u.add({severity:"error",summary:"ERROR",detail:"线路不能为空",life:3e3});const r=p.value.id,g=p.value.name,b=C.value;q(l,d,e,f,n,r,g,b)},ee=()=>{const l=c.value.id;J(l)},le=()=>{O.value=[];for(let l=0;l<h.value.length;l++)for(let e=0;e<k.value.length;e++){let d={id:"",userId:"",domain:"",type:"",value:"",line:"",createdTime:""};h.value[l].did===k.value[e].id&&(F.value=k.value[e].name,d.id=h.value[l].id,d.userId=h.value[l].userId,d.domain=h.value[l].prefix+"."+F.value,d.type=h.value[l].type,d.value=h.value[l].value,d.line=h.value[l].line,d.createdTime=h.value[l].createdTime,O.value.push(d))}},ae=()=>{I.get("/domain/detail/"+m.value.id).then(function(l){l.data.code===200?(console.log(l.data.data),j.value=l.data.data.point,A.value=l.data.data.comment):(console.log(l.data),u.add({severity:"error",summary:"ERROR",detail:l.data.msg,life:3e3}))}).catch(function(l){console.log(l)})};return(l,e)=>{const d=R("Toolbar"),f=R("InputText"),n=R("Button"),r=R("Column"),g=R("DataTable"),b=R("Toast"),s=R("Dropdown"),y=R("Textarea"),N=R("Dialog");return z(),$(se,null,[ve,t("div",null,[t("div",fe,[o(d,{class:"mb-4"},{start:_(()=>[pe]),_:1}),o(g,{showGridlines:"",value:ne(O),dataKey:"id",columnResizeMode:"fit",paginator:!0,rows:10,filters:M.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"第 {first} 页，本页 {last} 条记录，共 {totalRecords} 条记录"},{header:_(()=>[t("div",_e,[t("span",he,[ge,o(f,{modelValue:M.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=a=>M.value.global.value=a),placeholder:"搜索"},null,8,["modelValue"])]),o(n,{label:"添加",icon:"pi pi-plus",severity:"success",class:"mr-2",onClick:e[1]||(e[1]=a=>U.value=!0)})])]),default:_(()=>[o(r,{field:"id",header:"ID"}),o(r,{field:"userId",header:"用户ID"}),o(r,{field:"domain",header:"域名"},{body:_(a=>[t("a",{href:"http://"+a.data.domain,target:"_blank"},H(a.data.domain),9,be)]),_:1}),o(r,{field:"type",header:"记录类型",style:{"min-width":"8rem"}}),o(r,{field:"value",header:"记录值",style:{"min-width":"8rem"}}),o(r,{field:"line",header:"线路",style:{"min-width":"8rem"}}),o(r,{exportable:!1,style:{"min-width":"24rem"}},{body:_(a=>[t("span",ye,[o(n,{label:"编辑",icon:"pi pi-pencil",onClick:oe=>Q(a.data)},null,8,["onClick"]),o(n,{label:"删除",icon:"pi pi-trash",severity:"danger",onClick:oe=>W(a.data)},null,8,["onClick"])])]),_:1})]),_:1},8,["value","filters"])]),o(b),o(N,{visible:T.value,"onUpdate:visible":e[8]||(e[8]=a=>T.value=a),style:{width:"450px"},header:"更新记录",modal:!0,class:"p-fluid"},{footer:_(()=>[o(n,{text:"",label:"取消",icon:"pi pi-times",onClick:S}),o(n,{text:"",label:"确认",icon:"pi pi-check",onClick:Y,loading:v.value},null,8,["loading"])]),default:_(()=>[t("div",Re,[Ve,o(f,{id:"prefix",modelValue:x.value,"onUpdate:modelValue":e[2]||(e[2]=a=>x.value=a),modelModifiers:{trim:!0},placeholder:"请输入域名前缀",autofocus:""},null,8,["modelValue"])]),t("div",xe,[De,o(s,{id:"dns",modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=a=>m.value=a),options:k.value,optionLabel:"name",placeholder:"请选择域名",class:"w-full"},null,8,["modelValue","options"])]),t("div",Ce,[we,o(s,{id:"type",modelValue:V.value,"onUpdate:modelValue":e[4]||(e[4]=a=>V.value=a),options:P.value,optionLabel:"name",placeholder:"请选择记录类型",class:"w-full"},null,8,["modelValue","options"])]),t("div",Ie,[ke,o(f,{id:"value",modelValue:D.value,"onUpdate:modelValue":e[5]||(e[5]=a=>D.value=a),modelModifiers:{trim:!0},placeholder:"请输入记录值"},null,8,["modelValue"])]),t("div",Te,[Ue,o(s,{id:"line",modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=a=>p.value=a),options:B.value,optionLabel:"name",placeholder:"请选择解析线路",class:"w-full"},null,8,["modelValue","options"])]),t("div",Le,[Ee,o(y,{id:"comment",modelValue:C.value,"onUpdate:modelValue":e[7]||(e[7]=a=>C.value=a),modelModifiers:{trim:!0},rows:"3",cols:"30"},null,8,["modelValue"])])]),_:1},8,["visible"]),o(N,{visible:U.value,"onUpdate:visible":e[15]||(e[15]=a=>U.value=a),style:{width:"450px"},header:"添加记录",modal:!0,class:"p-fluid"},{footer:_(()=>[o(n,{text:"",label:"取消",icon:"pi pi-times",onClick:S}),o(n,{text:"",label:"确认",icon:"pi pi-check",onClick:Z,loading:v.value},null,8,["loading"])]),default:_(()=>[t("div",Me,[Oe,o(f,{id:"prefix",modelValue:x.value,"onUpdate:modelValue":e[9]||(e[9]=a=>x.value=a),modelModifiers:{trim:!0},placeholder:"[必填]请输入域名前缀",autofocus:""},null,8,["modelValue"])]),t("div",Se,[Ne,o(s,{id:"dns",modelValue:m.value,"onUpdate:modelValue":e[10]||(e[10]=a=>m.value=a),options:k.value,optionLabel:"name",placeholder:"[必填]请选择域名",class:"w-full",onChange:ae},null,8,["modelValue","options"])]),m.value!==null||m.value!==void 0||m.value!==""?(z(),$("div",Pe,[re(" 消耗积分: "+H(j.value),1),Be,t("span",{innerHTML:A.value},null,8,je)])):ce("",!0),t("div",Ae,[Fe,o(s,{id:"type",modelValue:V.value,"onUpdate:modelValue":e[11]||(e[11]=a=>V.value=a),options:P.value,optionLabel:"name",placeholder:"[必填]请选择记录类型",class:"w-full"},null,8,["modelValue","options"])]),t("div",ze,[$e,o(f,{id:"value",modelValue:D.value,"onUpdate:modelValue":e[12]||(e[12]=a=>D.value=a),modelModifiers:{trim:!0},placeholder:"[必填]请输入记录值"},null,8,["modelValue"])]),t("div",He,[Ge,o(s,{id:"line",modelValue:p.value,"onUpdate:modelValue":e[13]||(e[13]=a=>p.value=a),options:B.value,optionLabel:"name",placeholder:"[必填]请选择解析线路",class:"w-full"},null,8,["modelValue","options"])]),t("div",Ke,[Xe,o(y,{id:"comment",modelValue:C.value,"onUpdate:modelValue":e[14]||(e[14]=a=>C.value=a),modelModifiers:{trim:!0},rows:"3",cols:"30"},null,8,["modelValue"])])]),_:1},8,["visible"]),o(N,{visible:L.value,"onUpdate:visible":e[16]||(e[16]=a=>L.value=a),modal:"",header:"删除记录",style:{width:"450px"}},{footer:_(()=>[o(n,{label:"取消",icon:"pi pi-times",onClick:S,text:""}),o(n,{label:"确认",icon:"pi pi-check",onClick:ee,autofocus:""})]),default:_(()=>[qe]),_:1},8,["visible"])])],64)}}};export{Ye as default};
