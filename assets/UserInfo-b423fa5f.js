import{a as w}from"./axios-99a7d01f.js";import{u as q,e as a,f as z,r as h,o as k,c as C,a as s,b as e,t as i,d as A,l as S,w as b,F as G}from"./index-8ffd0240.js";const H={class:"card p-fluid"},J={class:"surface-section"},K=e("div",{class:"font-medium text-3xl text-900 mb-3"},"用户信息",-1),L={class:"list-none p-0 m-0"},Q={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},W=e("div",{class:"text-500 w-6 md:w-2 font-medium"},"ID",-1),X={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},Y={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},Z=e("div",{class:"text-500 w-6 md:w-2 font-medium"},"邮箱",-1),ee={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},te={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},le=e("div",{class:"text-500 w-6 md:w-2 font-medium"},"手机号码",-1),oe={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},ae={key:0,class:"w-6 md:w-2 flex justify-content-end"},se={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},de=e("div",{class:"text-500 w-6 md:w-2 font-medium"},"真实姓名",-1),ie={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},ne={key:0,class:"w-6 md:w-2 flex justify-content-end"},re={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},ue=e("div",{class:"text-500 w-6 md:w-2 font-medium"},"身份证号",-1),ce={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},me={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},fe=e("div",{class:"text-500 w-6 md:w-2 font-medium"},"积分",-1),ve={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},xe={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},pe=e("div",{class:"text-500 w-6 md:w-2 font-medium"},"用户组",-1),_e={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},we={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},he=e("div",{class:"text-500 w-6 md:w-2 font-medium"},"注册时间",-1),be={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},ge={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},ye=e("div",{class:"text-500 w-6 md:w-2 font-medium"},"最近登录时间",-1),Re={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},Ve={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},ke=e("div",{class:"text-500 w-6 md:w-2 font-medium"},"账号状态",-1),Ce={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},Te={class:"field"},Ie=e("label",{for:"name"},"真实姓名",-1),Ne={class:"field"},Ue=e("label",{for:"idNumber"},"身份证号",-1),Ee={class:"field"},De=e("label",{for:"phone"},"手机号码",-1),$e={class:"field"},Oe=e("label",{for:"code"},"短信验证码",-1),je={__name:"UserInfo",setup(Be){const r=q(),T=a(""),I=a(""),n=a(""),N=a(""),c=a(""),U=a(""),E=a(0),D=a(""),$=a(""),O=a(1),p=a(null),g=a(null),y=a(null),R=a(null),m=a(!1),f=a(!1),v=a(!1),x=a(!1);z(()=>{V()});const V=()=>{w.get("/user/get_user").then(function(l){l.data.code===200?(T.value=l.data.data.id,I.value=l.data.data.email,n.value=l.data.data.name,N.value=l.data.data.idNumber,c.value=l.data.data.phone,U.value=l.data.data.point,E.value=l.data.data.roleId,D.value=l.data.data.createdTime,$.value=l.data.data.loginTime,O.value=l.data.data.status):r.add({severity:"error",summary:"ERROR",detail:l.data.msg,life:3e3})}).catch(function(l){console.log(l)})},M=l=>{f.value=!0,w.get("/user/phone_code",{params:{phone:l}}).then(function(t){t.data.code===200?(r.add({severity:"success",summary:"SUCCESS",detail:t.data.msg,life:3e3}),setTimeout(()=>{f.value=!1},6e4)):(r.add({severity:"error",summary:"ERROR",detail:t.data.msg,life:3e3}),setTimeout(()=>{f.value=!1},6e4))}).catch(function(t){console.log(t),setTimeout(()=>{f.value=!1},6e4)})},j=(l,t)=>{w.get("/user/check_phone",{params:{phone:l,code:t}}).then(function(d){d.data.code===200?(r.add({severity:"success",summary:"ERROR",detail:d.data.msg,life:3e3}),x.value=!1,V()):r.add({severity:"error",summary:"ERROR",detail:d.data.msg,life:3e3})}).catch(function(d){console.log(d)})},F=(l,t)=>{m.value=!0,w.post("/user/certification",{name:l,idNumber:t}).then(function(d){d.data.code===200?(r.add({severity:"success",summary:"ERROR",detail:d.data.msg,life:3e3}),v.value=!1,m.value=!1,V()):(r.add({severity:"error",summary:"ERROR",detail:d.data.msg,life:3e3}),m.value=!1)}).catch(function(d){console.log(d),m.value=!1})},P=l=>{switch(l){case 1:return"管理员";case 2:return"普通用户";case 3:return"高级用户";case 4:return"认证用户"}};return(l,t)=>{const d=h("Toast"),u=h("Button"),_=h("InputText"),B=h("Dialog");return k(),C(G,null,[s(d),e("div",H,[e("div",J,[K,e("ul",L,[e("li",Q,[W,e("div",X,i(T.value),1)]),e("li",Y,[Z,e("div",ee,i(I.value),1)]),e("li",te,[le,e("div",oe,i(c.value),1),c.value===null||c.value===void 0||c.value===""?(k(),C("div",ae,[s(u,{label:"手机号验证",icon:"pi pi-pencil",class:"p-button-text",onClick:t[0]||(t[0]=o=>x.value=!0)}),A("请先完成手机号认证，再进行实名认证 ")])):S("",!0)]),e("li",se,[de,e("div",ie,i(n.value===null||n.value===void 0||n.value===""?"未成年人可以进行实名认证，您的数据将被安全存储在中国-宿迁":n.value),1),n.value===null||n.value===void 0||n.value===""?(k(),C("div",ne,[s(u,{label:"实名认证",icon:"pi pi-pencil",class:"p-button-text",onClick:t[1]||(t[1]=o=>v.value=!0)})])):S("",!0)]),e("li",re,[ue,e("div",ce,i(N.value),1)]),e("li",me,[fe,e("div",ve,i(U.value),1)]),e("li",xe,[pe,e("div",_e,i(P(E.value)),1)]),e("li",we,[he,e("div",be,i(D.value),1)]),e("li",ge,[ye,e("div",Re,i($.value),1)]),e("li",Ve,[ke,e("div",Ce,i(O.value===1?"正常":"已封禁"),1)])])]),s(B,{visible:v.value,"onUpdate:visible":t[6]||(t[6]=o=>v.value=o),style:{width:"450px"},header:"实名认证",modal:!0,class:"p-fluid"},{footer:b(()=>[s(u,{text:"",label:"取消",icon:"pi pi-times",onClick:t[4]||(t[4]=o=>v.value=!1)}),s(u,{text:"",label:"确认",icon:"pi pi-check",onClick:t[5]||(t[5]=o=>F(y.value,R.value)),loading:m.value},null,8,["loading"])]),default:b(()=>[e("div",Te,[Ie,s(_,{id:"name",modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=o=>y.value=o),modelModifiers:{trim:!0},placeholder:"请输入真实姓名",autofocus:""},null,8,["modelValue"])]),e("div",Ne,[Ue,s(_,{id:"idNumber",modelValue:R.value,"onUpdate:modelValue":t[3]||(t[3]=o=>R.value=o),placeholder:"请输入18位身份证号码"},null,8,["modelValue"])])]),_:1},8,["visible"]),s(B,{visible:x.value,"onUpdate:visible":t[12]||(t[12]=o=>x.value=o),style:{width:"450px"},header:"手机验证",modal:!0,class:"p-fluid"},{footer:b(()=>[s(u,{text:"",label:"取消",icon:"pi pi-times",onClick:t[10]||(t[10]=o=>x.value=!1)}),s(u,{text:"",label:"确认",icon:"pi pi-check",onClick:t[11]||(t[11]=o=>j(p.value,g.value))})]),default:b(()=>[e("div",Ee,[De,s(_,{id:"phone",modelValue:p.value,"onUpdate:modelValue":t[7]||(t[7]=o=>p.value=o),modelModifiers:{trim:!0},placeholder:"请输入手机号码",autofocus:""},null,8,["modelValue"])]),e("div",$e,[Oe,s(_,{id:"code",modelValue:g.value,"onUpdate:modelValue":t[8]||(t[8]=o=>g.value=o),placeholder:"请输入短信验证码"},null,8,["modelValue"])]),s(u,{text:"",label:"发送短信验证码",icon:"pi pi-send",onClick:t[9]||(t[9]=o=>M(p.value)),loading:f.value},null,8,["loading"])]),_:1},8,["visible"])])],64)}}};export{je as default};
